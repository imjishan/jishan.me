---
import type { CollectionEntry } from 'astro:content'
import BaseHead from '../components/BaseHead.astro'
import FormattedDate from '../components/FormattedDate.astro'

type Props = CollectionEntry<'blog'>['data']

const { title, description, pubDate, updatedDate } = Astro.props
---

<html lang='en'>
  <head>
    <BaseHead title={title} description={description} />
    <style>
      main {
        width: calc(100% - 2em);
        max-width: 100%;
        margin: 0;
      }
      .prose {
        width: 720px;
        max-width: calc(100% - 2em);
        margin: auto;
        padding: 1em;
      }
    </style>
  </head>

  <body class='bg-zinc-900'>
    <svg
      class='pointer-events-none fixed isolate z-50 opacity-70 mix-blend-soft-light'
      width='100%'
      height='100%'
      ><filter id='pedroduarteisalegend'
        ><feTurbulence
          type='fractalNoise'
          baseFrequency='0.80'
          numOctaves='4'
          stitchTiles='stitch'></feTurbulence></filter
      ><rect width='100%' height='100%' filter='url(#pedroduarteisalegend)'
      ></rect></svg
    >
    <main
      class='mx-auto w-full max-w-screen-md h-screen flex flex-col justify-between px-4 md:px-10'
    >
      <article>
        <div class='prose prose-invert'>
          <div class='flex flex-col'>
            <a
              href='/blog'
              class='flex flex-row space-x-1 text-zinc-400 text-sm items-center group no-underline mb-4'
            >
              <svg
                xmlns='http://www.w3.org/2000/svg'
                width='22'
                height='12.38'
                viewBox='0 0 16 9'
                class='group-hover:text-zinc-200 group-hover:-translate-x-1 duration-200'
                ><path
                  fill='currentColor'
                  d='M12.5 5h-9c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h9c.28 0 .5.22.5.5s-.22.5-.5.5Z'
                ></path><path
                  fill='currentColor'
                  d='M6 8.5a.47.47 0 0 1-.35-.15l-3.5-3.5c-.2-.2-.2-.51 0-.71L5.65.65c.2-.2.51-.2.71 0c.2.2.2.51 0 .71L3.21 4.51l3.15 3.15c.2.2.2.51 0 .71c-.1.1-.23.15-.35.15Z'
                ></path></svg
              >
              <span class='group-hover:text-zinc-200'>Back</span>
            </a>
            <span class='font-semibold text-2xl'>{title}</span>
            <div class='pt-4'>
              <FormattedDate date={pubDate} />
              {
                updatedDate && (
                  <div class='last-updated-on'>
                    Last updated on <FormattedDate date={updatedDate} />
                  </div>
                )
              }
            </div>
            <hr />
          </div>
          <slot />
        </div>
      </article>
    </main>
  </body>
</html>
